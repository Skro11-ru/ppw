---
import { Image } from 'astro:assets';
import self from '../../../public/photos/main/self.jpg';
---

<div class="marquee marquee--3">
	{
		// eslint-disable-next-line @typescript-eslint/no-unused-vars
		new Array(15).fill(0).map((_, i) => {
			return (
				<Image
					src={self}
					alt="self photo"
					width={300}
					quality={80}
					widths={[400, 768, 1024, 1920, self.width]}
					sizes="(max-width: 767px) 400px, (max-width: 1023px) 768px, (max-width: 2039px) 1024px, ${self.width}px"
					loading="eager"
					class="marquee__item"
				/>
			);
		})
	}
</div>

<div class="filmstrip">
	<div class="filmstrip-content"></div>
</div>

<style lang="scss">
	.filmstrip {
		display: flex;
		width: 100%;
	}

	.filmstrip-content {
		display: flex;
		animation: scroll 1s linear infinite;
	}

	.filmstrip-content img {
		width: 300px;
		margin: 0 5px;
		object-fit: cover;
	}

	.marquee {
		position: relative;
		display: flex;
		width: 100vw;
		margin-top: 116px;
		margin-left: -50%;
		transform: rotate(-10deg);
		block-size: var(--marquee-item-height);
	}

	.marquee--3 {
		--marquee-item-width: 300px;
		--marquee-item-height: 300px;
		--marquee-duration: 100s;
		--marquee-items: 15;
	}

	.marquee__item {
		--marquee-item-offset: max(
			calc(var(--marquee-item-width) * var(--marquee-items)),
			calc(100% + var(--marquee-item-width))
		);
		--marquee-delay: calc(
			var(--marquee-duration) / var(--marquee-items) *
				(var(--marquee-items) - var(--marquee-item-index)) * -1
		);

		position: absolute;
		inset-inline-start: var(--marquee-item-offset);
		transform: translateX(-50%);
		animation: go linear var(--marquee-duration) var(--marquee-delay, 0s)
			infinite;
	}

	.marquee--3 .marquee__item:nth-of-type(1) {
		--marquee-item-index: 1;
	}

	.marquee--3 .marquee__item:nth-of-type(2) {
		--marquee-item-index: 2;
	}

	.marquee--3 .marquee__item:nth-of-type(3) {
		--marquee-item-index: 3;
	}

	.marquee--3 .marquee__item:nth-of-type(4) {
		--marquee-item-index: 4;
	}

	.marquee--3 .marquee__item:nth-of-type(5) {
		--marquee-item-index: 5;
	}

	.marquee--3 .marquee__item:nth-of-type(6) {
		--marquee-item-index: 6;
	}

	.marquee--3 .marquee__item:nth-of-type(7) {
		--marquee-item-index: 7;
	}

	.marquee--3 .marquee__item:nth-of-type(8) {
		--marquee-item-index: 8;
	}

	.marquee--3 .marquee__item:nth-of-type(9) {
		--marquee-item-index: 9;
	}

	.marquee--3 .marquee__item:nth-of-type(10) {
		--marquee-item-index: 10;
	}

	.marquee--3 .marquee__item:nth-of-type(11) {
		--marquee-item-index: 11;
	}

	.marquee--3 .marquee__item:nth-of-type(12) {
		--marquee-item-index: 12;
	}

	.marquee--3 .marquee__item:nth-of-type(13) {
		--marquee-item-index: 13;
	}

	.marquee--3 .marquee__item:nth-of-type(14) {
		--marquee-item-index: 14;
	}

	.marquee--3 .marquee__item:nth-of-type(15) {
		--marquee-item-index: 15;
	}

	@keyframes scroll {
		0% {
			transform: translateX(0);
		}

		100% {
			transform: translateX(-50%);
		}
	}

	@keyframes go {
		to {
			inset-inline-start: calc(var(--marquee-item-width) * -1);
		}
	}
</style>
